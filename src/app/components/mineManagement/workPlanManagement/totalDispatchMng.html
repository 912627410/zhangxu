<div style="padding: 10px;" ng-controller="totalDispatchMngController as ctrl">
  <div class="row form-group">
    <div class="col-md-1 paddingR0">
      <label class="control-label">作业面</label>
    </div>
    <div class="col-md-2">
      <select name="workFace" class="form-control"
              ng-model="ctrl.totalDispatch.workFace"
              ng-options="workFaces.id as workFaces.name for workFaces in ctrl.workFaceList">
        <option value="">{{'pleaseSelect'|translate}}</option>
      </select>
    </div>

    <label class="col-md-1 control-label paddingR0">车队</label>
    <div class="col-md-2">
      <select name="fleet" class="form-control"
              ng-model="ctrl.totalDispatch.fleet"
              ng-options="fleets.id as fleets.name for fleets in ctrl.fleetList"
              ng-change="ctrl.getTeamList(ctrl.totalDispatch.fleet)">
        <option value="">{{'pleaseSelect'|translate}}</option>
      </select>
    </div>

    <label class="col-md-1 control-label paddingR0">小组</label>
    <div class="col-md-2">
      <select name="fleet" class="form-control"
              ng-model="ctrl.totalDispatch.team"
              ng-options="teams.id as teams.name for teams in ctrl.teamList">
        <option value="">{{'pleaseSelect'|translate}}</option>
      </select>
    </div>

    <div class="col-md-3 text-right">
      <button class="btn btn-default" ng-click="ctrl.reset()">重置</button>
      <span>&nbsp;</span>
      <button class="btn btn-primary" ng-click="ctrl.query(null, null, null)">查询</button>
    </div>
  </div>
  <div class="row form-group">
    <div class="col-md-1 paddingR0">
      <label class="control-label">排土场</label>
    </div>
    <div class="col-md-2">
      <select name="dumpField" class="form-control"
              ng-model="ctrl.totalDispatch.dumpField"
              ng-options="dumpFields.id as dumpFields.name for dumpFields in ctrl.dumpFieldList">
        <option value="">{{'pleaseSelect'|translate}}</option>
      </select>
    </div>

    <label class="col-md-1 control-label paddingR0">班次</label>
    <div class="col-md-2">
      <select name="workShift" class="form-control"
              ng-model="ctrl.totalDispatch.workShift"
              ng-options="workShifts.code as workShifts.description for workShifts in ctrl.workShiftList">
        <option value="">{{'pleaseSelect'|translate}}</option>
      </select>
    </div>

    <label class="col-md-1 control-label paddingR0">日期</label>
    <div class="col-md-2">
      <p class="input-group">
        <input type="text" name="effectiveDate" class="form-control m-b-20" uib-datepicker-popup="yyyy-MM-dd"
               ng-model="ctrl.effectiveDate"
               is-open="ctrl.dateOpenStatus"
               datepicker-options="ctrl.dateOptions"
               current-text="{{'today'|translate}}"
               clear-text="{{'cleanUp'|translate}}"
               close-text="{{'close'|translate}}"
               message-id="bootstrap" readonly/>
        <span class="input-group-btn">
                <button type="button" class="btn btn-default"
                        ng-click="ctrl.dateOpen($event)">
                  <i class="glyphicon glyphicon-calendar"></i>
                </button>
              </span>
      </p>
    </div>
  </div>
  <div class="row form-group">
    <div class="btn-group col-md-6" style="line-height: 34px;">
      <span style="font-size: 18px;font-weight: bold;">分配列表</span>
      <span>{{'totalNumberOfRecords'|translate}} {{ctrl.page.totalElements}}</span>
    </div>
    <div class="col-md-6 text-right">
      <button class="btn btn-warning" ng-click="ctrl.batchUpdate()" ng-show="ctrl.batchUpdateDispatchBtn">批量修改</button>
      <span>&nbsp;</span>
      <button class="btn btn-primary" ng-click="ctrl.add()">增加</button>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <script id="selectTotalDispatchAllHeader" type="text/ng-template">
        <input type="checkbox" ng-click="ctrl.totalDispatchAllSelection($event)"
               ng-model="ctrl.checked"/>
      </script>
      <div class="table-responsive">
        <table ng-table="ctrl.tableParams"
               class="table table-condensed table-bordered table-striped text-nowrap">
          <tr ng-repeat="totalDispatch in $data">
            <td class="text-nowrap text-center" data-header="'selectTotalDispatchAllHeader'">
              <input type="checkbox" ng-checked="ctrl.isSelected(totalDispatch)"
                     ng-click="ctrl.totalDispatchSelection($event,totalDispatch)"
                     ng-model="totalDispatch.checked"/>
            </td>
            <td class="text-nowrap" data-title="'车队'" sortable="'fleet'">{{totalDispatch.fleetName}}</td>
            <td class="text-nowrap" data-title="'小组'" sortable="'team'">{{totalDispatch.teamName}}</td>
            <td class="text-nowrap" data-title="'工作面'" sortable="'workFace'">{{totalDispatch.workFaceName}}</td>
            <td class="text-nowrap" data-title="'排土场'" sortable="'dumpField'">{{totalDispatch.dumpFieldName}}</td>
            <td class="text-nowrap" data-title="'班次'" sortable="'workShift'">{{totalDispatch.workShiftDesc}}</td>
            <td class="text-nowrap" data-title="'创建时间'" sortable="'createTime'">{{totalDispatch.createTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
            <td class="text-nowrap" data-title="'更新时间'" sortable="'updateTime'">{{totalDispatch.updateTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
            <td class="text-nowrap text-center" data-title="'操作'">
              <button class="btn btn-xs btn-warning" ng-click="ctrl.update(totalDispatch)" ng-show="ctrl.updateDispatchBtn">修改</button>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <uib-pagination total-items="ctrl.page.totalElements"
                      ng-change="ctrl.query(ctrl.pageNumber-1,null,null)"
                      max-size="10"
                      ng-model="ctrl.pageNumber"
                      items-per-page="ctrl.page.size"
                      class="pagination-sm" boundary-links="true" rotate="false"
                      first-text="首页" last-text="最后一页"
                      next-text="下一页"
                      previous-text="前一页"></uib-pagination>
    </div>
  </div>
</div>
