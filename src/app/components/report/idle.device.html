<!-- Right side column. Contains the navbar and content of the page -->
<!-- Content Header (Page header) -->

<section class="content-header">
  <h1>
    <small></small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-dashboard"></i> 主页</a></li>
    <li class="active">长时间未连接设备</li>
  </ol>
</section>


<!-- Main content -->
<section class="content">

  <div class="row">
    <div class="col-md-2">
      <label class="control-label">设备最后连接日期</label>
    </div>
    <div class="col-md-3">
      <p class="input-group">
        <input type="text" class="form-control" uib-datepicker-popup="yyyy-M!-d!" ng-model="idleDeviceCtrl.dataUploadDate" is-open="idleDeviceCtrl.dataUploadDateOpenStatus.opened" datepicker-options="idleDeviceCtrl.dateOptions" min-date="idleDeviceCtrl.minDate" max-date="idleDeviceCtrl.maxDate" ng-required="true" current-text="{{'today'|translate}}" clear-text="{{'cleanUp'|translate}}" close-text="{{'close'|translate}}" />
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" ng-click="idleDeviceCtrl.dataUploadDateOpen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                        </span>
      </p>
    </div>

    <div class="col-md-5">
    </div>


    <div class="col-md-2">
      <button class="btn btn-primary" type="button"
              presentation-href="config:sysconfigPage"
              ng-click="idleDeviceCtrl.query(null,null,null,idleDeviceCtrl.dataUploadDate)">查询
      </button>
      <button class="btn btn-primary" type="button" ng-click="idleDeviceCtrl.reset()">重置</button>
    </div>
  </div>


  <div class="row">
    <div class="btn-group col-md-3">
      <span class="label label-info pull-left">总数:{{idleDeviceCtrl.page.totalElements}}</span>
    </div>
    <div class="col-md-6">
    </div>
    <div class="col-md-2">
      <a class="btn btn-default pull-right"  title="Export Table" ng-click='csv.generate()' ng-href="{{csv.link()}}" download="长时间未连接设备.csv">{{'export'|translate}}</a>
    </div>
  </div>

  <div class="table-responsive">
    <table ng-table="idleDeviceCtrl.tableParams" class="table table-condensed table-bordered table-striped text-nowrap" export-csv='csv'>
      <tr ng-repeat="device in $data">
        <td class="text-nowrap" data-title="'设备编号'" sortable="'deviceNum'">{{device.deviceNum}}</td>
        <td class="text-nowrap" data-title="'车辆编号'" sortable="'machine.licenseId'">{{device.machine.licenseId}}</td>
        <td class="text-nowrap" data-title="'SIM卡号'" sortable="'sim.phoneNumber'">{{device.sim.phoneNumber}}</td>
        <td class="text-nowrap" data-title="'最后上传时间'" sortable="'lastDataUploadTime'">{{device.lastDataUploadTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
      </tr>
    </table>
  </div>
  </div>

  <div class="box-footer">
    <uib-pagination total-items="idleDeviceCtrl.page.totalElements"
                    ng-change="idleDeviceCtrl.query(idleDeviceCtrl.pageNumber-1,null,null,idleDeviceCtrl.dataUploadDate)"
                    max-size="5" ng-model="idleDeviceCtrl.pageNumber" items-per-page="idleDeviceCtrl.page.size"
                    class="pagination-sm" boundary-links="true" rotate="false"
                    first-text="首页" last-text="最后一页" next-text="下一页" previous-text="前一页"></uib-pagination>
  </div>

</section>

