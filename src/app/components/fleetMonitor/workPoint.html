<section class="content-header">
  <h1>
    <small></small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-dashboard"></i> {{'homePage'|translate}}</a></li>
    <li class="active"> {{'equipmentMonitoring'|translate}}</li>
  </ol>
</section>

<!-- Main content -->
<section class="content form-horizontal">


  <!-- 高德地图 -->
  <div class = "row">
    <div class="col-xs-12 connectedSortable">
      <div class="box box-danger">
        <div class="box-header">
          <!-- tools box -->

          <div class="form-inline pull-right box-tools">
              <input type="text" id="tipinput" class="form-control" placeholder="{{'search'|translate}}" name="tipinput" style="width: 200px;"/>
              <input type="text" id="lnglat" class="form-control" placeholder="{{'latitudeAndLongitude'|translate}}" name="lnglat" style="width: 200px;"/>
              <button class="btn btn-danger btn-sm refresh-btn" data-toggle="tooltip" ng-click="workPointCtrl.refreshMainMap()" title="{{'refresh'|translate}}"><i class="fa fa-refresh"></i></button>
          </div>
          <p class="input-group col-sm-3">

            <input type="text" id="fleet" class="form-control" placeholder="{{'fleet'|translate}}"
                   ng-model="workPointCtrl.fleet.label" name="fleet" readonly required/>
            <span class="input-group-btn">
            <!--打开组织树-->
            <button type="button" class="btn btn-default" ng-click="workPointCtrl.openFleetTree()">
              <i class="fa fa-sitemap"></i>
            </button>
          </span>
          </p>
        </div><!-- /.box-header -->


        <div class="box-body" style="min-height: 500px" id="workPointMap"></div>
      </div>
    </div><!-- /.col -->
  </div>
  <uib-tabset justified="true">
    <uib-tab heading="{{'workPoint'|translate}}" select="workPointCtrl.initPointQuery(null,null,null,workPointCtrl.fleet)">
      <br>
      <div class="row">
        <!--<div class="btn-group col-md-4">-->
          <!--<span>{{'totalNumberOfRecords'|translate}} {{workPointCtrl.page.totalElements}}</span>-->
        <!--</div>-->
        <div class="btn-group col-md-12 right">
          <a class="btn btn-default pull-right"  presentation-href="fleet:workPoint:add"  ng-click="workPointCtrl.create()">{{'create'|translate}}{{'workPoint'|translate}}</a>
        </div>
      </div>

      <div class="row" style="padding: 10px">
        <!--列表模式-->
        <div class="table-responsive">
          <table ng-table="workPointCtrl.tableParams"  class="table table-condensed table-bordered table-striped text-nowrap" export-csv='csv'>
            <tr ng-repeat="workPoint in $data">

              <td class="text-nowrap" data-title="'id'|translate" sortable="'workPoint.id'">{{workPoint.id}}</td>
              <td class="text-nowrap" data-title="'name'|translate" sortable="'workPoint.name'">{{workPoint.name}}</td>
              <td class="text-nowrap" data-title="'type'|translate" sortable="'workPoint.typeDesc'" >{{workPoint.typeDesc}}</td>
              <td class="text-nowrap" data-title="'description'|translate" sortable="'workPoint.describe'">{{workPoint.describe}}</td>
              <td class="text-nowrap" data-title="'longitude'|translate" >{{workPoint.longitude}}</td>
              <td class="text-nowrap" data-title="'latitude'|translate" >{{workPoint.latitude}}</td>
              <td class="text-nowrap" data-title="'radius'|translate" >{{workPoint.radius}}</td>

              <td class="text-nowrap" data-title="'operation'|translate">
                <button type="button" class="btn btn-default btn-xs" ng-hide="workPoint.id==workPointCtrl.operWorkPorint"
                        presentation-href="fleet:workPoint:update" ng-click="workPointCtrl.update(workPoint)">{{'edit'|translate}}
                </button>
                <button type="button" class="btn btn-warning btn-xs" ng-show="workPoint.id==workPointCtrl.operWorkPorint"
                        presentation-href="fleet:workPoint:update" ng-click="workPointCtrl.save(workPoint)">{{'save'|translate}}
                </button>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="box-footer">
        <uib-pagination total-items="workPointCtrl.page.totalElements"
                        ng-change="workPointCtrl.initQuery(workPointCtrl.pagenumber-1,null,null)"
                        max-size="15" ng-model="workPointCtrl.pagenumber" items-per-page="workPointCtrl.page.size"
                        class="pagination-sm" boundary-links="true" rotate="false"
                        first-text="{{'pagingHomePage' | translate}}" last-text="{{'lastPage'|translate}}" next-text="{{'nextPage'|translate}}" previous-text="{{'previousPage'|translate}}">

        </uib-pagination>
      </div>
    </uib-tab>
    <uib-tab heading="{{'workLine'|translate}}" select="workPointCtrl.initLineQuery(null,null,null,workPointCtrl.fleet)">
      <br>
      <div class="row">
        <!--<div class="btn-group col-md-4">-->
        <!--<span>{{'totalNumberOfRecords'|translate}} {{workPointCtrl.page.totalElements}}</span>-->
        <!--</div>-->
        <div class="btn-group col-md-12 right">
          <a class="btn btn-default pull-right"  presentation-href="fleet:workPoint:add"  ng-click="workPointCtrl.createLine()">{{'create'|translate}}{{'workLine'|translate}}</a>
        </div>
      </div>

      <div class="row" style="padding: 10px">
        <!--列表模式-->
        <div class="table-responsive">
          <table ng-table="workPointCtrl.lineTableParams"  class="table table-condensed table-bordered table-striped text-nowrap" export-csv='csv'>
            <tr ng-repeat="workLine in $data">

              <td class="text-nowrap" data-title="'id'|translate" sortable="'workLine.id'">{{workLine.id}}</td>
              <td class="text-nowrap" data-title="'name'|translate" sortable="'workLine.name'">{{workLine.name}}</td>
              <td class="text-nowrap" data-title="'underFleet'|translate" sortable="'workLine.fleet.name'">{{workLine.fleet.label}}</td>
              <td class="text-nowrap" data-title="'beginPoint'|translate" >{{workLine.beginPoint.name}}</td>
              <td class="text-nowrap" data-title="'endPoint'|translate" >{{workLine.endPoint.name}}</td>
              <td class="text-nowrap" data-title="'distance(m)'|translate" >{{workLine.distance}}</td>

              <td class="text-nowrap" data-title="'operation'|translate">
                <button type="button" class="btn btn-primary btn-xs" ng-show="workLine.ifMonitor == 0"
                        presentation-href="fleet:workPoint:update" ng-click="workPointCtrl.openMonitor(workLine)">{{'openMonitor'|translate}}
                </button>
                <button type="button" class="btn btn-warning btn-xs" ng-show="workLine.ifMonitor == 1"
                        presentation-href="fleet:workPoint:update" ng-click="workPointCtrl.closeMonitor(workLine)">{{'closeMonitor'|translate}}
                </button>
                <button type="button" class="btn btn-danger btn-xs" ng-show="workLine.status == 1"
                        presentation-href="fleet:workPoint:update" ng-click="workPointCtrl.remove(workLine)">删除
                </button>
              </td>
            </tr>
          </table>
        </div>

      </div>
      <div class="box-footer">
        <uib-pagination total-items="workPointCtrl.linePage.totalElements"
                        ng-change="workPointCtrl.initQuery(workPointCtrl.linePagenumber-1,null,null)"
                        max-size="15" ng-model="workPointCtrl.linePagenumber" items-per-page="workPointCtrl.linePage.size"
                        class="pagination-sm" boundary-links="true" rotate="false"
                        first-text="{{'pagingHomePage' | translate}}" last-text="{{'lastPage'|translate}}" next-text="{{'nextPage'|translate}}" previous-text="{{'previousPage'|translate}}">

        </uib-pagination>
      </div>
    </uib-tab>
  </uib-tabset>

</section>
