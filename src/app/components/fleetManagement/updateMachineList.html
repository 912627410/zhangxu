<div class="modal-header">
  <h3 class="modal-title">车辆维护
    <button class="btn btn-warning pull-right" type="button" ng-click="updateMachineListCtrl.cancel()">{{'close'|translate}}</button>
  </h3>
</div>
<uib-tabset justified="true">
  <uib-tab heading="拥有车辆" select="updateMachineListCtrl.query(null, null, null, updateMachineListCtrl.fleet,'org')">
    <div class="box">
    </div>
    <div class="col-xs-12 connectedSortable">
      <div class="table-responsive">
        <table ng-table="updateMachineListCtrl.ownTableParams" class="table table-condensed table-bordered table-striped">
          <tr ng-repeat="machine in $data">
            <td class="text-nowrap" data-title="'整机编号/车号'" sortable="'licenseId'">{{machine.licenseId}}</td>
            <td class="text-nowrap" data-title="'设备号'" sortable="'deviceinfo.deviceNum'">{{machine.deviceinfo.deviceNum}}</td>
            <td class="text-nowrap" data-title="'发动机类型'" sortable="'engineType.engineName'">{{machine.engineType.engineName}}</td>
            <td class="text-nowrap" data-title="'所属组织/车队'" sortable="'org.label'">{{machine.org.label}}</td>
            <td class="text-nowrap" data-title="'当前工作车队'" sortable="'fleet.label'">{{machine.fleet.label}}</td>
            <td class="text-nowrap" align="center" data-title="'操作'" >
              <button type="button" class="btn btn-danger btn-xs"
                      ng-click="updateMachineListCtrl.moveToOtherFleet(machine)">借调至其它车队
              </button>
            </td>
          </tr>
        </table>
      </div>
    </div>
    <div class="box-footer">
      <uib-pagination total-items="updateMachineListCtrl.ownPage.totalElements" ng-change="updateMachineListCtrl.query(updateMachineListCtrl.ownPagenumber-1,null,null,updateMachineListCtrl.fleet,'org')" max-size="15" ng-model="updateMachineListCtrl.ownPagenumber" items-per-page="updateMachineListCtrl.ownPage.size" class="pagination-sm" boundary-links="true" rotate="false"  previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>
      <button class="btn btn-primary pull-right" type="button" ng-click="updateMachineListCtrl.addMachine('org')">添加车辆</button>
    </div>
  </uib-tab>

  <uib-tab heading="工作车辆" select="updateMachineListCtrl.query(null, null, null, updateMachineListCtrl.fleet,'fleet')">
    <div class="box">
    </div>
    <div class="col-xs-12 connectedSortable">
      <div class="table-responsive">
        <table ng-table="updateMachineListCtrl.workTableParams" class="table table-condensed table-bordered table-striped">
          <tr ng-repeat="machine in $data">
            <td class="text-nowrap" data-title="'整机编号/车号'" sortable="'licenseId'">{{machine.licenseId}}</td>
            <td class="text-nowrap" data-title="'设备号'" sortable="'deviceinfo.deviceNum'">{{machine.deviceinfo.deviceNum}}</td>
            <td class="text-nowrap" data-title="'发动机类型'" sortable="'engineType.engineName'">{{machine.engineType.engineName}}</td>
            <td class="text-nowrap" data-title="'所属组织/车队'" sortable="'org.label'">{{machine.org.label}}</td>
            <td class="text-nowrap" data-title="'当前工作车队'" sortable="'fleet.label'">{{machine.fleet.label}}</td>

            <td class="text-nowrap" align="center" data-title="'操作'" >
              <button type="button" class="btn btn-danger btn-xs"
                      ng-click="updateMachineListCtrl.moveToOtherFleet(machine)">借调至其它车队
              </button>
              <button type="button" class="btn btn-danger btn-xs" ng-if="machine.org.id!=machine.fleet.id"
                      ng-click="updateMachineListCtrl.backToOrg(machine)">归还车辆
              </button>
            </td>
          </tr>
        </table>
      </div>
    </div>
    <div class="box-footer">
      <uib-pagination total-items="updateMachineListCtrl.workPage.totalElements" ng-change="updateMachineListCtrl.query(updateMachineListCtrl.workPagenumber-1,null,null,updateMachineListCtrl.fleet,'fleet')" max-size="15" ng-model="updateMachineListCtrl.workPagenumber" items-per-page="updateMachineListCtrl.workPage.size" class="pagination-sm" boundary-links="true" rotate="false"  previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>
      <button class="btn btn-primary pull-right" type="button" ng-click="updateMachineListCtrl.addMachine('fleet')">借调车辆</button>

    </div>
  </uib-tab>

</uib-tabset>
