<div class="modal-header">
  <h3 class="modal-title">操作日志
    <button style="margin-left: 5px" class="btn btn-warning pull-right" type="button" ng-click="operationLogCtrl.cancel()">{{'close'|translate}}</button>
  </h3>
</div>

<!-- Main content -->
<section class="content form-horizontal">

  <div class="row form-group">
    <div class="col-md-2">
      <label class="control-label text-nowrap">起始日期:</label>
    </div>
    <div class="col-md-3">
      <p class="input-group">
        <input type="text" class="form-control" uib-datepicker-popup="{{formatCustom}}" ng-model="operationLogCtrl.startDateDeviceData" is-open="operationLogCtrl.startDateOpenStatusDeviceData.opened" datepicker-options="operationLogCtrl.dateOptions" min-date="operationLogCtrl.minDate" max-date="operationLogCtrl.maxDate" ng-required="true" current-text="{{'today'|translate}}" clear-text="{{'cleanUp'|translate}}" close-text="{{'close'|translate}}" />
        <span class="input-group-btn">
            <button type="button" class="btn btn-default" ng-click="operationLogCtrl.startDateOpenDeviceData($event)"><i class="glyphicon glyphicon-calendar"></i></button>
        </span>
      </p>
    </div>
    <div class="col-md-2">
      <label class="control-label text-nowrap">结束日期:</label>
    </div>
    <div class="col-md-3">
      <p class="input-group">
        <input type="text" class="form-control" uib-datepicker-popup="{{formatCustom}}" ng-model="operationLogCtrl.endDateDeviceData" is-open="operationLogCtrl.endDateOpenStatusDeviceData.opened" datepicker-options="operationLogCtrl.dateOptions" ng-required="true" current-text="{{'today'|translate}}" clear-text="{{'cleanUp'|translate}}" close-text="{{'close'|translate}}" />
        <span class="input-group-btn">
            <button type="button" class="btn btn-default" ng-click="operationLogCtrl.endDateOpenDeviceData($event)"><i class="glyphicon glyphicon-calendar"></i></button>
        </span>
      </p>
    </div>
    <div class="col-md-2 text-right">
      <button class="btn btn-primary" type="button" presentation-href="operationLog:page" ng-click="operationLogCtrl.query(null,8,null,operationLogCtrl.startDateDeviceData,operationLogCtrl.endDateDeviceData)">{{'confirm'|translate}}</button>
    </div>
  </div>

  <div class="row form-group">
    <div class="btn-group col-md-2">
      <span class="label label-info pull-left">记录总数:{{operationLogCtrl.page.totalElements}}</span>
    </div>
    <div class="col-md-10">
      <span style="color: red;">特别提醒：</span>
      新建用户、更新用户、管理员更改密码中的原值为被操作的用户名
    </div>
  </div>

  <div class="table-responsive">
    <table ng-table="operationLogCtrl.tableParams" class="table table-condensed table-bordered table-striped text-nowrap">
      <tr ng-repeat="operationLogData in $data">
        <td class="text-nowrap" data-title="'描述'" sortable="'updateDesc'">{{operationLogData.updateDesc}}</td>
        <td class="text-nowrap" data-title="'原值'" sortable="'originValue'">{{operationLogData.originValue}}</td>
        <td class="text-nowrap" data-title="'新值'" sortable="'targetValue'">{{operationLogData.targetValue}}</td>
        <td class="text-nowrap" data-title="'ip'" sortable="'ip'">{{operationLogData.ip}}</td>
        <td class="text-nowrap" data-title="'修改人'" sortable="'operator'">{{operationLogData.operator}}</td>
        <td class="text-nowrap" data-title="'所属组织'" sortable="'operatorOrg'">{{operationLogData.operatorOrg}}</td>
        <td class="text-nowrap" data-title="'操作时间'" sortable="'recordTime'">{{operationLogData.recordTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
      </tr>
    </table>
  </div>

  <div class="box-footer">
    <uib-pagination total-items="operationLogCtrl.page.totalElements"
                    ng-change="operationLogCtrl.query(operationLogCtrl.pageNumber-1,8,null,operationLogCtrl.startDateDeviceData,operationLogCtrl.endDateDeviceData)"
                    max-size="10" ng-model="operationLogCtrl.pageNumber" items-per-page="operationLogCtrl.page.size" class="pagination-sm"
                    boundary-links="true" rotate="true" first-text="首页" last-text="最后一页" next-text="下一页" previous-text="前一页">
    </uib-pagination>
  </div>
</section>

